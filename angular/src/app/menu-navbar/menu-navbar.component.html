<nav class="navbar fixed-top navbar-expand-lg navbar-light bg-white">
    <!-- Container wrapper -->
    <div class="container">    
      <!-- Toggle button -->
      <button
        class="navbar-toggler"
        type="button"
        data-mdb-toggle="collapse"
        data-mdb-target="#navbarSupportedContent1"
        aria-controls="navbarSupportedContent1"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <i class="fas fa-bars"></i>
      </button>
  
      <!-- Collapsible wrapper -->
      <div class="collapse navbar-collapse" id="navbarSupportedContent1">      
        <!-- Navbar brand -->
        <a class="navbar-brand mt-2 mt-sm-0" href="https://mdbootstrap.com/">
          <img
            src="https://mdbcdn.b-cdn.net/img/logo/mdb-transaprent-noshadows.webp"
            height="20"
            alt="MDB Logo"
            loading="lazy"
          />
        </a>
        <!-- Left links -->
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item active">
            <a class="nav-link " href="#">Home</a>
          </li>
          <!-- <li class="nav-item">
            <a class="nav-link" href="https://mdbootstrap.com/docs/standard/">About MDB</a>
          </li> -->
          <!-- <li class="nav-item">
            <a class="nav-link" href="https://mdbootstrap.com/docs/standard/getting-started/installation/">Free download</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://mdbootstrap.com/education/bootstrap/">Free tutorials</a>
          </li> -->
        </ul>
        <!-- Left links -->      
      </div>
      <!-- Collapsible wrapper -->
      
      <!-- Right elements -->
      <div class="d-flex align-items-center justify-content-center">
        <!-- Icon -->
        <a class="nav-link me-3" routerLink="" (click)="openFullscreen(shoppingcartmodal)" >
          <i class="fas fa-shopping-cart"></i>
          <span *ngIf="itemsInCart" class="badge rounded-pill badge-notification bg-danger">{{itemsInCart}}</span>
        </a>
        <a *ngIf="!username" class="nav-link me-3" routerLink="" (click)="openEnd(loginoffcanvas)" (click)="resetForms()">
          <i class="far fa-user"></i>
        </a>
        <a *ngIf="username" class="nav-link me-3" routerLink="" (click)="openEnd(signedin)">
          <i class="far fa-user"></i>
        </a>
        <p *ngIf="username"class="border-start border-2 p-0 m-0">&nbsp;Hello, <b>{{username}}</b></p>
        <!-- 
        <a class="nav-link me-3" href="#">
          <i class="fab fa-twitter"></i>
        </a>
        <a href="https://github.com/mdbootstrap/bootstrap-material-design" class="border rounded px-2 nav-link"
                target="_blank">
                <i class="fab fa-github me-2"></i>MDB GitHub
              </a> -->
      </div>
      <!-- Right elements -->
      
    </div>
    <!-- Container wrapper -->
  </nav>
  <!-- Navbar -->

  <!-- Modal for shopping cart -->
  <ng-template #shoppingcartmodal let-modal>
    <div class="modal-header">
      <h4 class="modal-title">Your shopping cart <h5>Pre-tax Total: {{totalCost | currency}}</h5></h4>
      
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div *ngIf="itemsInCart" class="modal-body">
      <div *ngFor="let item of shoppingCart" class="list-group">
        <div class="list-group-item list-group-item-action d-flex flex-row align-items-center justify-content-between ">
          <div class="d-flex flex-row align-items-center justify-content-between">
            <div>
              <img [src]="item.image" [alt]="item.title" width="130px" height="130px">
            </div>
            <div class="p-3">
              <h5>{{item.title}}</h5>
              <h6>{{item.price|currency}}</h6>
            </div>
          </div>
          <div class="d-flex align-items-center">
            <div class="me-1" style="width: 50px;">
                <input type="number"  onKeyPress="if(this.value.length==4) return false;" min="0"  class="form-control p-1 text-center" [value]="item.quantity" #num (change)="updateQuantityOfItem(item,num.value)" />
            </div>
            <a routerLink="" style="color: rgb(131, 129, 129); opacity: 50%;" (click)="removeItem(item.id, num.value)">
              <i class="fa-regular fa-trash-can fa-xl"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="!itemsInCart" class="modal-body d-flex  align-items-center justify-content-center">
        <h4>Your cart is empty!</h4>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-dark" [disabled]="itemsInCart==0" (click)="checkout(loginoffcanvas)" (click)="modal.close('Close click')">CheckOut</button>
      <button type="button" class="btn btn-light" (click)="modal.dismiss('Close click')">Close</button>
    </div>
  </ng-template>
<!-- Modal for shopping cart end -->

<!-- Modal for sign in section -->
  <ng-template  #loginoffcanvas let-offcanvas >
    <div class="offcanvas-header">
      <h3 class="offcanvas-title">Sign In</h3>
      <button type="button" class="btn-close" (click)="offcanvas.dismiss('Cross click')"></button>
    </div>
    <div class="offcanvas-body d-flex justify-content-center align-items-center">
      <form class="form-group w-100" [formGroup]="loginForm" (ngSubmit)="login(loginForm.value);">
        <div *ngIf="customerLoginErrorMessage" class="alert alert-danger" role="alert">
          {{customerLoginErrorMessage}}
        </div> 
        <div class="mb-3">
          <input class="form-control p-3" type="text" formControlName="username" placeholder="Username" id="customerUser">
        </div>
        <div class="mb-3">
          <input class="form-control p-3" type="password" formControlName="password" placeholder="Password" id="customerPass">
        </div>
        <div class="d-flex justify-content-center">
          <button class="btn btn-dark" type="submit" [disabled]="loginForm.invalid"  >
            Sign In
          </button>
          <button class="btn btn-dark-outline ml-3" type="button" (click)="closeLoginOffCanvas()" (click)="openEnd(signupoffcanvas)" (click)="resetForms()" >
            Not a member?
          </button>
        </div>
      </form>
    </div>
    <div class="offcanvas-footer">
      <button type="button" class="btn btn-light" (click)="offcanvas.close('Close click')">Close</button>
    </div>
  </ng-template>
<!-- Modal for sign in section end-->

<!-- Modal for sign up section -->
  <ng-template #signupoffcanvas let-offcanvas>
    <div class="offcanvas-header">
      <h3 class="offcanvas-title">Sign Up</h3>
      <button type="button" class="btn-close" (click)="offcanvas.dismiss('Cross click')"></button>
    </div>
    <div class="offcanvas-body d-flex justify-content-center align-items-center">
      <form class="form-group w-100" [formGroup]="signUpForm" (ngSubmit)="signUp(signUpForm.value);">
        <div *ngIf="customerSignupErrorMessage" class="alert alert-danger" role="alert">
          {{customerSignupErrorMessage}}
        </div>  
        <div class="mb-0">
          <input class="form-control p-3" type="text" formControlName="username" placeholder="Username" id="customerUser">
        </div>
        <div class="mb-3">
          <sub class="p-0 m-0">Optional</sub>
          <input class="form-control p-3" type="text" formControlName="email" placeholder="Email Address" id="customerEmail">
          
        </div>
       
        <div class="mb-3">
          <input class="form-control p-3" type="password" formControlName="password" placeholder="Password" id="customerPass">
        </div>
        <div class="mb-3">
          <input class="form-control p-3" type="password" formControlName="confirmPassword" placeholder="Confirm Password" id="customerConfirmPass">
        </div>
        <div class="d-flex justify-content-center">
          <button class="btn btn-dark-outline ml-3" type="submit" [disabled]="signUpForm.invalid">
            Sign Up
          </button>
        </div>
      </form>
    </div>
    <div class="offcanvas-footer">
      <button type="button" class="btn btn-light" (click)="offcanvas.close('Close click')">Close</button>
    </div>
  </ng-template>
  <!-- Modal for sign up section end-->

  <!-- Modal for logged in customer -->
  <ng-template #signedin let-offcanvas>
    <div class="offcanvas-header">
      <h3 class="offcanvas-title">Account Details</h3>
      <button type="button" class="btn-close" (click)="offcanvas.dismiss('Cross click')"></button>
    </div>
    <div class="offcanvas-body list-group-flush p-0">
        <a routerLink="" class="list-group-item list-group-item-action list-group-item-light mb-1 p-3">View order history</a>
    </div>
    <div class="offcanvas-footer d-flex align-items-center justify-content-evenly">
      <button type="button" class="btn btn-light" (click)="offcanvas.close('Close click')">Close</button>
      <button type="button" class="btn btn-secondary" >Sign off</button>
    </div>
  </ng-template>


  <!-- Modal for logged in customer end-->